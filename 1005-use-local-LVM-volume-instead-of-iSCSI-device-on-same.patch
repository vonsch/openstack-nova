--- a/nova/virt/libvirt/volume.py.orig	2013-03-18 17:30:59.000000000 +0100
+++ b/nova/virt/libvirt/volume.py	2013-03-26 15:13:00.324665130 +0100
@@ -19,7 +19,10 @@
 
 import os
 import time
+from os.path import basename
+from os.path import islink
 
+from nova.api.ec2 import ec2utils
 from nova import exception
 from nova import flags
 from nova.openstack.common import log as logging
@@ -48,8 +51,21 @@
         conf.target_dev = mount_device
         conf.target_bus = "virtio"
         conf.serial = connection_info.get('serial')
+
+        volume_id = connection_info['data']['volume_id']
+
+        # TODO: ec2_volume_id have to be computed from FLAGS.volume_name_template
+        local_volume = "/dev/%s/%s" % (FLAGS.volume_group, ec2utils.id_to_ec2_vol_id(volume_id))
+        is_local_volume = islink(local_volume)
+
+        if is_local_volume:
+             conf.device_path = local_volume
+             LOG.debug("Attaching local device %s as %s" % (local_volume, mount_device))
+        else:
+             LOG.debug("Attaching device %s as %s" % (device_path, mount_device))
         return conf
 
+
     def disconnect_volume(self, connection_info, mount_device):
         """Disconnect the volume"""
         pass
